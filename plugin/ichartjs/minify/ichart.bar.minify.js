iChart.Bar=iChart.extend(iChart.Chart,{configure:function(){iChart.Bar.superclass.configure.call(this);this.type="bar";this.set({coordinate:{striped_direction:"h"},bar_height:void 0,bar_space:void 0,text_space:6,scaleAlign:"bottom",sub_option:{},label:{}})},getCoordinate:function(){return this.coo},doLabel:function(a,b,c,d){this.labels.push(new iChart.Text(iChart.apply(this.get("label"),{id:a,text:b,textAlign:"right",textBaseline:"middle",originx:c,originy:d}),this))},doParse:function(a,b,c,d){a.doActing(a,b,d,c)},engine:function(a){var b=a.get("bar_height"),c=a.get("bar_space"),d=a.coo.getScale(a.get("scaleAlign")),f=a.coo.get(a.W),e=b/2,g="complex"!=a.dataType?b+c:a.data.length*b+c,h=a.coo.get(a.X)+d.basic*f,i=a.coo.get(a.X)-a.get("text_space")-a.coo.get("axis.width")[3],j=a.coo.get("y_start")+c;a.doEngine(a,b,c,d,f,e,g,h,i,j)},doAnimation:function(a,b,c){c.labels.each(function(a){a.draw()});c.rectangles.each(function(d){d.push(c.W,Math.ceil(c.animationArithmetic(a,0,d.width,b)));d.drawRectangle()})},doConfig:function(){iChart.Bar.superclass.doConfig.call(this);var a=this._();a.coo=iChart.Coordinate.coordinate_.call(a);a.rectangles=[];a.labels=[];a.rectangles.zIndex=a.get("z_index");a.labels.zIndex=a.get("z_index")+1;a.components.push(a.labels);a.components.push(a.rectangles);var b=a.data.length,c=a.coo.get("valid_height"),d,f,e;"simple"==a.dataType?(d=Math.floor(2*c/(3*b+1)),f=a.pushIf("bar_height",d),e=b+1):(e=a.get("labels").length,b=e*b+(a.is3D()?(b-1)*e*a.get("group_fator"):0),d=Math.floor(c/(e+1+b)),f=a.pushIf("bar_height",d),e+=1);f*b>c&&(f=a.push("bar_height",d));a.push("bar_space",(c-f*b)/e);a.push("sub_option.height",f);a.push("sub_option.valueAlign",a.R);a.push("sub_option.tipAlign",a.R)}});